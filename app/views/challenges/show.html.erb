<%= content_for :title, "Challenges ##{@challenge.id}" %>
<%= turbo_stream_from @challenge %>
<div class="container px-4 mx-auto my-8">
  <div class="flex justify-end mb-4">
    <% if @challenge.is_challenge_owner?(current_user) %>
      <%= render partial: "challenges/modals/challenge_invite_modal", locals: { challenge: @challenge} %>
    <% end %>
    <% if @challenge.user_can_enroll?(current_user) %>
      <%= button_to "Enroll", enroll_challenge_enrollment_path(@challenge), method: :post, class: "btn btn-primary mr-2" %>
    <% end %>

    <% if @challenge.user_enrolled_in_challenge?(current_user) %>
      <%= render partial: "challenges/modals/new_report_modal", locals: { challenge: @challenge, enrollment: @challenge.enrollment_for_user(current_user) } %>
      <%= button_to "Unenroll", unenroll_challenge_enrollment_path(@challenge, user_id: current_user.id), method: :post, class: "btn btn-danger mr-2", data: { turbo_confirm: "Unenrolling will erase your points." } %>
    <% end %>
    <% if @challenge.is_challenge_owner?(current_user) %>
      <%= link_to t("edit"), edit_challenge_path(@challenge), class: "btn btn-white" %>
    <% end %>
  </div>

  <div class="p-8 bg-white rounded shadow">
    <%= render @challenge %>
  </div>

</div>
</div>
